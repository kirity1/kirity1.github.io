---
key:
title: 'openGL vao와 vbo이해'
excerpt: '그래픽스'
tags: [그래픽스]
---

### OpenGL 셰이더 변수: `in`과 `uniform`의 핵심 차이점



OpenGL 렌더링 파이프라인에서 3D 모델을 화면에 그리기 위해서는 모델을 구성하는 각 **정점(Vertex)**의 데이터를 GPU로 효율적으로 전달해야 한다. 이때 정점의 위치, 색상, 법선 벡터, 텍스처 좌표 등 다양한 속성들이 활용된다. 이 데이터를 셰이더로 보내고 처리하는 과정에서 **`in` 변수(정점 속성)**와 **`uniform` 변수**는 서로 다른 역할을 수행하며 중요한 특징을 보인다.

------



#### 1. 정점 속성(`in` 변수): 개별 정점의 고유한 특징



```
layout (location=N) in vec3 position;
```

위와 같은 형태로 셰이더에 선언되는 **`in` 변수**는 **정점 속성(Vertex Attribute)**이라고 불린다. 이들은 각 정점마다 고유하게 다른 값을 가지는 데이터이다. 예를 들어:

- **위치(Position)**: 각 정점의 3D 공간 좌표
- **색상(Color)**: 각 정점의 색상 값
- **법선 벡터(Normal Vector)**: 각 정점에서의 표면 방향

이러한 정점 속성들은 셰이더의 **`layout (location=N)`** 퀄리파이어를 통해 특정 입력 슬롯에 매핑되며, CPU(C++ 애플리케이션)에서 **VBO(Vertex Buffer Object)**에 저장된 실제 정점 데이터를 **VAO(Vertex Array Object)**를 거쳐 셰이더로 전달된다.

정점 속성의 가장 중요한 특징 중 하나는 바로 **보간(Interpolation)**이다. 버텍스 셰이더에서 각 정점의 속성이 처리된 후, **래스터화(Rasterization)** 단계에서 이 값들은 삼각형과 같은 프리미티브 내부의 모든 픽셀(프래그먼트)을 위해 선형적으로 보간된다. 예를 들어, 삼각형의 세 정점이 다른 색상을 가질 경우, 래스터화는 이 색상들을 부드럽게 보간하여 삼각형 내부가 그라데이션으로 채워지도록 한다. 이 과정은 모델의 표면이 끊김 없이 매끄럽게 보이는 데 필수적이다.

------



#### 2. 유니폼 변수(`uniform`): 렌더링 환경의 공통 설정



```
uniform mat4 mv_matrix;` `uniform float lightIntensity;
```

이러한 **`uniform` 변수**는 셰이더 프로그램이 실행되는 동안 **모든 정점 셰이더 호출과 모든 프래그먼트 셰이더 호출에서 동일한 값을 유지**하는 변수이다. 즉, 이 값은 셰이더 전체에 걸쳐 '상수'처럼 작동한다.

그러다 보니, 유니폼 변수는 주로 다음과 같은, 렌더링되는 모델이나 장면에 **공통적으로 적용되는 정보**를 전달하는 데 사용된다:

- **변환 행렬(Transformation Matrices)**: 모델-뷰(Model-View) 행렬, 투영(Projection) 행렬 등 객체나 카메라의 위치, 회전, 크기를 정의하는 행렬
- **광원 정보**: 광원의 위치, 색상, 강도
- **시간 값**: 애니메이션을 위한 경과 시간
- **전역적인 설정 값**: 특정 효과를 위한 상수 값

유니폼 변수는 정점 속성처럼 래스터화 단계에서 **보간되지 않는다.** CPU에서 `glProgramUniform`과 같은 함수를 통해 한 번 값을 설정하면, 해당 셰이더 프로그램이 활성화되어 있는 동안 모든 셰이더 호출에서 그 값을 공유하며, 개별 정점이나 프래그먼트의 위치와 관계없이 항상 동일한 값을 유지한다.

------



### 핵심 요약



| 특징            | 정점 속성 (`in` 변수)                | 유니폼 변수 (`uniform` 변수)           |
| --------------- | ------------------------------------ | -------------------------------------- |
| **데이터 범위** | 각 정점마다 **고유한 값**            | 셰이더 프로그램 전체에 **동일한 값**   |
| **목적**        | 모델의 **개별 정점 특성** 정의       | **장면/모델 전체의 공통 설정 및 환경** |
| **보간 여부**   | **래스터화 단계에서 선형 보간됨**    | **보간되지 않음 (상수처럼 작동)**      |
| **예시**        | 위치, 색상, 법선 벡터, 텍스처 좌표   | 변환 행렬, 광원 위치/색상, 시간        |
| **데이터 전달** | VBO & VAO를 통해 특정 `location`으로 | `glProgramUniform`을 통해 이름으로     |

이러한 `in`과 `uniform` 변수의 역할을 정확히 이해하는 것은 OpenGL 파이프라인의 효율적인 활용과 복잡한 3D 그래픽스 구현을 위한 필수적인 첫걸음이라 할 수 있다.